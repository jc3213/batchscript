# First of all

- Download and unpack latest [realesrgan-ncnn-vulkan](https://github.com/xinntao/Real-ESRGAN/releases), [realcugan-ncnn-vulkan](https://github.com/nihui/realcugan-ncnn-vulkan/releases) and [waifu2x-ncnn-vulkan](https://github.com/nihui/waifu2x-ncnn-vulkan/releases)
    - C:\cli\\[upscale_ncnn_utilities.cmd](https://raw.githubusercontent.com/jc3213/batchscript/main/upscale/upscale_ncnn_utilities.cmd)
    - C:\cli\\[upscale_ncnn_utilities.ps1](https://raw.githubusercontent.com/jc3213/batchscript/main/upscale/upscale_ncnn_utilities.ps1)
    - C:\cli\bin\realesrgan-ncnn-vulkan.exe
    - C:\cli\bin\models\\\*
    - C:\cli\bin\realcugan-ncnn-vulkan.exe
    - C:\cli\bin\models-se\\*
    - C:\cli\bin\models-pro\\*
    - C:\cli\bin\waifu2x-ncnn-vulkan.exe
    - C:\cli\bin\models-cunet\\*
    - C:\cli\bin\models-upconv_7_anime_style_art_rgb\\*
- Drag and drop image files or directories over `upscale_ncnn_utilities.cmd`
- Execute `upscale_ncnn_utilities.ps1` with `Run with PowerShell`
- Read upscaler [settings](#Settings)
- If output image is black, try to [fixed output](#Fixed-Output)

## Settings
- Model (model)
    - Real-ESRGAN Plus Anime
        - Upscaler `ncnn`: Real-ESRGAN
        - Model `model`: realesrgan-x4plus-anime
    - Real-ESRGAN Anime Video v3
        - Upscaler `ncnn`: Real-ESRGAN
        - Model `model`: realesr-animevideov3
    - Real-CUGAN Se
        - Upscaler `ncnn`: Real-CUGAN
        - Model `model`: models-se
    - Real-CUGAN Pro
        - Upscaler `ncnn`: Real-CUGAN
        - Model `model`: models-pro
    - Waifu2x CUnet
        - Upscaler `ncnn`: Waifu2x
        - Model `model`: models-cunet
    - Waifu2x Anime Style
        - Upscaler `ncnn`: Waifu2x
        - Model `model`: models-upconv_7_anime_style_art_rgb
- Scale Ratio (scale)
    - *not available for `realesrgan-x4plus-anime` and `models-pro`*
    - 2x
    - 4x
- Denoise Level (noise)
    - *not available for `Real-ESRGAN`*
    - 0
        - *Disable*
    - 1
    - 2
    - 3
- TTA Mode (tta)
    - *not available for `Real-ESRGAN`*
    - 1
        - *Enable*
- Output Format (format)
    - jpg
    - png
    - webp
- Output Result
    - `${name} (${ncnn})(${model})(${scale})(${noise})?(${tta})?.${format}`

## Fixed Output
- Referenced `tiles`
    - 6GB VRAM
        - `144` for 768x768
        - `64` for 1600x1600
    - 4GB VRAM
        - `112` for 768x768
        - `48` for 1600x1600
- Add ` -t ${tiles}` to after `%params%` before `>`
    - https://github.com/jc3213/batchscript/blob/5ea8548897910481ede91c9564d310175637eebc/upscale/upscale_ncnn_utilities.cmd#L143
- Add ` -t ${tiles}` to after `$script:params` before `"`
    - https://github.com/jc3213/batchscript/blob/5ea8548897910481ede91c9564d310175637eebc/upscale/upscale_ncnn_utilities.ps1#L101
